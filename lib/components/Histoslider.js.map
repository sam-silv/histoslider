{"version":3,"sources":["../../src/components/Histoslider.js"],"names":["histosliderStyle","position","backgroundColor","border","Histoslider","state","dragging","setState","props","onChange","extent","data","start","Math","floor","bucketSize","end","ceil","innerWidth","width","padding","scale","domain","range","clamp","selection","selectionSorted","Object","assign","paddingTop","showOnDrag","reset","bind","height","dragChange","propTypes","arrayOf","number","isRequired","func","selectionColor","string","histogramHeight","histogramPadding","bool","style","object","barBorderRadius","defaultProps"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;AAEA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,mBAAmB;AACvBC,YAAU,UADa;AAEvBC,mBAAiB,SAFM;AAGvBC,UAAQ;AAHe,CAAzB;;IAMqBC,W;;;AAEnB,yBAAe;AAAA;;AAAA;;AAEb,UAAKC,KAAL,GAAa;AACXC,gBAAU;AADC,KAAb;AAFa;AAKd;;;;+BAEWA,Q,EAAU;AACpB,WAAKC,QAAL,CAAc,EAAED,kBAAF,EAAd;AACD;;;4BAEQ;AACP,WAAKE,KAAL,CAAWC,QAAX,CAAoB,IAApB;AACD;;;6BAES;AACR,UAAMC,SAAS,qBAAE,KAAKF,KAAL,CAAWG,IAAb,CAAf;AACA,UAAMC,QAAQ,KAAKJ,KAAL,CAAWI,KAAX,IAAoB,CAApB,GAAwB,KAAKJ,KAAL,CAAWI,KAAnC,GAA2CC,KAAKC,KAAL,CAAWJ,OAAO,CAAP,IAAY,KAAKF,KAAL,CAAWO,UAAlC,IAAgD,KAAKP,KAAL,CAAWO,UAApH;AACA,UAAMC,MAAM,KAAKR,KAAL,CAAWQ,GAAX,IAAkB,CAAlB,GAAsB,KAAKR,KAAL,CAAWQ,GAAjC,GAAuCH,KAAKI,IAAL,CAAUP,OAAO,CAAP,IAAY,KAAKF,KAAL,CAAWO,UAAjC,IAA+C,KAAKP,KAAL,CAAWO,UAA7G;;AAEA,UAAMG,aAAa,KAAKV,KAAL,CAAWW,KAAX,GAAoB,KAAKX,KAAL,CAAWY,OAAX,GAAqB,CAA5D;AACA,UAAMC,QAAQ,4BAASC,MAAT,CAAgB,CAACV,KAAD,EAAQI,GAAR,CAAhB,EAA8BO,KAA9B,CAAoC,CAAC,KAAKf,KAAL,CAAWY,OAAZ,EAAqBF,aAAa,KAAKV,KAAL,CAAWY,OAA7C,CAApC,EAA2FI,KAA3F,CAAiG,IAAjG,CAAd;AACA,UAAIC,YAAY,KAAKjB,KAAL,CAAWiB,SAAX,GAAuB,KAAKjB,KAAL,CAAWiB,SAAlC,GAA8C,CAACb,KAAD,EAAQI,GAAR,CAA9D;AACA,UAAMU,kBAAkB,qBAAED,SAAF,CAAxB;;AAEA;AACA,aACE;AAAA;AAAA,UAAK,OAAOE,OAAOC,MAAP,CAAc5B,gBAAd,EAAgC,EAAEmB,OAAO,KAAKX,KAAL,CAAWW,KAApB,EAA2BU,YAAY,KAAKrB,KAAL,CAAWY,OAAlD,EAAhC,CAAZ,EAA0G,WAAU,iCAApH;AAGI,SAAC,KAAKZ,KAAL,CAAWsB,UAAZ,IAA0B,KAAKzB,KAAL,CAAWC,QAArC,GACE,mDACIqB,OAAOC,MAAP,CACJ,EADI,EAEJ,KAAKpB,KAFD,EAGF;AACEI,sBADF;AAEEI,kBAFF;AAGEe,iBAAO,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAHT;AAIEtB,wBAJF;AAKEe,qBAAWC,eALb;AAMER,gCANF;AAOEG,sBAPF;AAQEY,kBAAQ,KAAKzB,KAAL,CAAWyB,MAAX,GAAoB;AAR9B,SAHE,CADJ,CADF,GAiBE,IApBN;AAuBE,wDAAYN,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKpB,KAAvB,EAA8B,EAAEI,YAAF,EAASI,QAAT,EAAckB,YAAY,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAA1B,EAAsDD,OAAO,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAA7D,EAAoFtB,cAApF,EAA4Fe,oBAA5F,EAAuGC,gCAAvG,EAAwHL,YAAxH,EAA+HH,sBAA/H,EAA2Ie,QAAQ,EAAnJ,EAA9B,CAAZ;AAvBF,OADF;AA2BD;;;;;;kBAvDkB7B,W;;;AA0DrBA,YAAY+B,SAAZ,GAAwB;AACtBxB,QAAM,iBAAUyB,OAAV,CAAkB,iBAAUC,MAA5B,EAAoCC,UADpB;AAEtB7B,YAAU,iBAAU8B,IAAV,CAAeD,UAFH;AAGtB1B,SAAO,iBAAUyB,MAHK;AAItBrB,OAAK,iBAAUqB,MAJO;AAKtBG,kBAAgB,iBAAUC,MALJ;AAMtB1B,cAAY,iBAAUsB,MANA;AAOtBlB,SAAO,iBAAUkB,MAPK;AAQtBJ,UAAQ,iBAAUI,MARI;AAStBjB,WAAS,iBAAUiB,MATG;AAUtBZ,aAAW,iBAAUW,OAAV,CAAkB,iBAAUC,MAA5B,CAVW;AAWtBK,mBAAiB,iBAAUL,MAXL;AAYtBM,oBAAkB,iBAAUN,MAZN;AAatBP,cAAY,iBAAUc,IAbA;AActBC,SAAO,iBAAUC,MAdK;AAetBC,mBAAiB,iBAAUV;AAfL,CAAxB;;AAkBAjC,YAAY4C,YAAZ,GAA2B;AACzBjC,cAAY,CADa;AAEzByB,kBAAgB,SAFS;AAGzBV,cAAY,KAHa;AAIzBa,oBAAkB,CAJO;AAKzBvB,WAAS,EALgB;AAMzBD,SAAO,GANkB;AAOzBc,UAAQ,GAPiB;AAQzBc,mBAAiB,CARQ;AASzBF,SAAO;AACL1C,YAAQ;AADH;AATkB,CAA3B","file":"Histoslider.js","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { extent as e } from 'd3-array'\nimport { scaleLinear as linear } from 'd3-scale'\n\nimport Histogram from './Histogram'\nimport Slider from './Slider'\n\nconst histosliderStyle = {\n  position: 'relative',\n  backgroundColor: '#fafafa',\n  border: '1px solid #eaeaea'\n}\n\nexport default class Histoslider extends Component {\n\n  constructor () {\n    super()\n    this.state = {\n      dragging: false\n    }\n  }\n\n  dragChange (dragging) {\n    this.setState({ dragging })\n  }\n\n  reset () {\n    this.props.onChange(null)\n  }\n\n  render () {\n    const extent = e(this.props.data)\n    const start = this.props.start >= 0 ? this.props.start : Math.floor(extent[0] / this.props.bucketSize) * this.props.bucketSize\n    const end = this.props.end >= 0 ? this.props.end : Math.ceil(extent[1] / this.props.bucketSize) * this.props.bucketSize\n\n    const innerWidth = this.props.width - (this.props.padding * 2)\n    const scale = linear().domain([start, end]).range([this.props.padding, innerWidth + this.props.padding]).clamp(true)\n    let selection = this.props.selection ? this.props.selection : [start, end]\n    const selectionSorted = e(selection)\n\n    // TODO: selection layer\n    return (\n      <div style={Object.assign(histosliderStyle, { width: this.props.width, paddingTop: this.props.padding })} className='Histoslider Histoslider-wrapper'>\n\n        {\n          !this.props.showOnDrag || this.state.dragging\n          ? <Histogram\n            {...Object.assign(\n            {},\n            this.props,\n              {\n                start,\n                end,\n                reset: this.reset.bind(this),\n                extent,\n                selection: selectionSorted,\n                innerWidth,\n                scale,\n                height: this.props.height - 40\n              }\n          )\n          } />\n          : null\n        }\n\n        <Slider {...Object.assign({}, this.props, { start, end, dragChange: this.dragChange.bind(this), reset: this.reset.bind(this), extent, selection, selectionSorted, scale, innerWidth, height: 50 })} />\n      </div>\n    )\n  }\n}\n\nHistoslider.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.number).isRequired,\n  onChange: PropTypes.func.isRequired,\n  start: PropTypes.number,\n  end: PropTypes.number,\n  selectionColor: PropTypes.string,\n  bucketSize: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  padding: PropTypes.number,\n  selection: PropTypes.arrayOf(PropTypes.number),\n  histogramHeight: PropTypes.number,\n  histogramPadding: PropTypes.number,\n  showOnDrag: PropTypes.bool,\n  style: PropTypes.object,\n  barBorderRadius: PropTypes.number\n}\n\nHistoslider.defaultProps = {\n  bucketSize: 1,\n  selectionColor: '#2ecc71',\n  showOnDrag: false,\n  histogramPadding: 4,\n  padding: 20,\n  width: 400,\n  height: 200,\n  barBorderRadius: 0,\n  style: {\n    border: '1px solid red'\n  }\n}\n"]}